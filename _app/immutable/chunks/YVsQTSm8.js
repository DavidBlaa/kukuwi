import{a as m,t as x,n as oe,c as se}from"./CHkck4dw.js";import{p as A,c as T,t as G,g as t,r as B,q as k,a as N,f as C,d as y,s as g,u as Z,b as w}from"./BjWHaepb.js";import{i as R}from"./C6Z4-7cA.js";import{b as d,p as S}from"./C6ycZBfC.js";import{o as ue}from"./nRd-gLFk.js";import{e as ee,i as te}from"./C6vC90Bg.js";import{s as j,B as H,a as J,c as ne}from"./Bop7QRR4.js";import{s as ie,e as de}from"./IyUyzwpQ.js";import{b as me,R as ve,d as ce,e as fe,G as ge}from"./CuiplVon.js";import"./DElrIAp5.js";import{b as P}from"./C3By-Gyw.js";import{M as xe}from"./Cl9yoHdk.js";import{k as $}from"./C_kQ09Xn.js";var be=x("<div></div>"),_e=x('<p class="absolute inset-x-0 bottom-[0.05rem] text-3xl font-bold text-white lg:bottom-[0.3rem] 2xl:bottom-2 2xl:text-7xl">+</p>'),pe=x('<p class="absolute inset-x-0 bottom-[0.05rem] text-3xl font-bold text-white lg:bottom-[0.3rem] 2xl:bottom-2 2xl:text-7xl">-</p>'),he=x('<div class="flex h-full w-8 flex-none flex-col items-center justify-end lg:w-10 2xl:w-24"><div class="mb-4 flex h-full w-4/6 flex-col-reverse justify-center rounded-2xl lg:mb-5 2xl:mb-7 2xl:w-1/3"></div> <!> <!></div>');function we(p,e){A(e,!0);let o=d(e,"volume",15);const s=S(Array(10).fill(!1));let a=o()*100;for(let l=0;l<a/10;l++)s[l]=!0;function u(l){if(l){if(a>=100)return;a+=10,s[a/10-1]=!0,o(a/100)}else{if(a<=0)return;s[a/10-1]=!1,a-=10,o(a/100)}}var i=he(),n=T(i);ee(n,21,()=>s,te,(l,f)=>{var c=be();G(()=>j(c,`${(t(f)?"bg-green-500":"bg-green-100")??""} h-full w-full border-2 border-gray-500 2xl:border-4`)),m(l,c)}),B(n);var b=k(n,2);H(b,{bgFront:"bg-amber-500",bgBack:"bg-amber-700",onmouseup:()=>{},onclick:()=>u(!0),style:"rounded-full size-[2rem] lg:size-[2.7rem] lg:mb-2 2xl:size-[4.5rem] mb-2 2xl:mb-5",translateY:"translate-y-[-0.25rem] 2xl:translate-y-[-0.375rem]",padding:"relative size-[2rem] lg:size-[2.7rem] 2xl:size-[4.5rem] rounded-full",children:(l,f)=>{var c=_e();m(l,c)},$$slots:{default:!0}});var v=k(b,2);H(v,{bgFront:"bg-amber-500",bgBack:"bg-amber-700",onmouseup:()=>{},onclick:()=>u(!1),style:"rounded-full size-[2rem] lg:size-[2.7rem] lg:mb-2 2xl:size-[4.5rem] mb-2 2xl:mb-5",translateY:"translate-y-[-0.25rem] 2xl:translate-y-[-0.375rem]",padding:"relative size-[2rem] lg:size-[2.7rem] 2xl:size-[4.5rem] rounded-full",children:(l,f)=>{var c=pe();m(l,c)},$$slots:{default:!0}}),B(i),m(p,i),N()}var ye=oe('<svg xmlns="http://www.w3.org/2000/svg" role="img"><image width="100%" height="100%" preserveAspectRatio="xMidyMid meet"></image></svg>');function Be(p,e){let o=d(e,"viewBox",8,"0 0 48 48"),s=d(e,"className",8,""),a=d(e,"src",8);var u=ye(),i=T(u);B(u),G(()=>{J(u,"viewBox",o()),ne(u,`icon p-2 sm:p-3 md:p-4 lg:p-5 ${s()}`),J(i,"href",a())}),m(p,u)}var ke=x("<p> </p>"),ze=x("<audio></audio>"),Ie=x("<!> <!>",1),Te=x("<!> <!>",1);function Fe(p,e){A(e,!0);let o=d(e,"is_active",7),s=d(e,"paused",7,!0),a=d(e,"active_color_top",3,"bg-blue-400"),u=d(e,"active_color_bottom",3,"[box-shadow:0_10px_0_0_#4e81bf,0_15px_0_0_#1b70f841]"),i=d(e,"passiv_color_top",3,"bg-blue-100"),n=d(e,"passiv_color_bottom",3,"bg-gray-400"),b=d(e,"use_audio",3,!0),v=d(e,"use_header",3,!0),l=d(e,"volume",3,.5);function f(h=!1){o(!o()),h||s(!s())}var c=Te(),L=C(c);{var Y=h=>{var z=ke(),F=T(z,!0);B(z),G(()=>{j(z,`w-fit px-1 text-xs lg:text-xl ${(o()?a():i())??""} mb-2 rounded-sm font-bold lg:mb-3`),ie(F,e.name)}),m(h,z)};R(L,h=>{v()&&h(Y)})}var E=k(L,2);const Q=y(()=>o()?a():i()),q=y(()=>o()?u():n());return H(E,{get onmouseup(){return e.onmouseup},get bgFront(){return t(Q)},get bgBack(){return t(q)},style:"flex w-full",padding:"w-full",translateY:"lg:translate-y-[-0.7rem] translate-y-[-0.4rem]",children:(h,z)=>{var F=Ie(),M=C(F);Be(M,{get src(){return e.img_url},className:"w-full"});var K=k(M,2);{var V=r=>{var _=ze();G(()=>{J(_,"src",e.audio_url),_.volume=l()}),de("ended",_,()=>f(!0)),me(_,s),m(r,_)};R(K,r=>{b()&&r(V)})}m(h,F)},$$slots:{default:!0}}),m(p,c),N({handle_music_tile_click:f})}var Se=x("<div><!></div>"),Ge=x('<div></div> <div class="absolute left-6 top-0 m-3 mt-10"><!></div>',1);function Le(p,e){A(e,!0);var o=Ge(),s=C(o);ee(s,21,()=>e.instruments,te,(i,n,b)=>{var v=Se(),l=T(v);const f=y(()=>P+"/icons/instruments/"+t(n).image),c=y(()=>e.useTileSounds?"audio"in t(n)?`${P}/audios/${t(n).audio}`:`${P}/audios/${t(n).audios[0]}`:"");Fe(l,{get img_url(){return t(f)},get is_active(){return e.activeTileList[b]},get use_audio(){return e.useTileSounds},get audio_url(){return t(c)},get name(){return t(n).name},use_header:!0,get paused(){return e.pauseTileList[b]},onmouseup:()=>e.onmouseup(!1,b),get volume(){return e.volume}}),B(v),G(()=>j(v,`flex max-h-[50%] flex-col items-center justify-center ${e.instruments.length>4?"basis-1/4 px-2 lg:px-5 2xl:px-8":"fhd:px-16 basis-1/2 px-4 lg:px-8"}`)),m(i,v)}),B(s);var a=k(s,2),u=T(a);ve(u,{}),B(a),G(()=>j(s,`flex h-full flex-wrap self-center p-1 lg:p-3 2xl:h-[90%] ${e.instruments.length>4?"w-[72%] lg:w-full":"w-[44%] lg:w-[46%]"}`)),m(p,o),N()}var Me=x('<div class="absolute left-0 top-0"><!></div>'),Pe=x('<div class="flex size-full justify-between gap-4 rounded-2xl border-x-[7px] border-b-[14px] border-t-[7px] border-b-gray-600 border-l-gray-200 border-r-gray-400 border-t-gray-400 bg-[#d1d5db] p-3 shadow-2xl lg:border-x-[10px] lg:border-b-[20px] lg:border-t-[10px] lg:p-10"><!> <!> <!> <!></div>');function He(p,e){A(e,!0);let o=d(e,"volume",15),s=w(!0),a=w(!0),u=w(!1),i=w(!1),n=w(0),b=w(!0),v=w(0),l=w(void 0),f=w(void 0);ue(()=>{g(l,S(ce($[e.difficulty-1].instruments,$[e.difficulty-1].sameCategory))),g(f,S(fe(t(l)))),g(s,!1),Z(v)});let c=y(()=>{var r;return(r=t(f))==null?void 0:r.index}),L=y(()=>{var r;return(r=t(l))==null?void 0:r.length});const Y=y(()=>Array(t(L)).fill(!1)),E=y(()=>Array(t(L)).fill(!0));let Q=y(()=>{var r;return P+"/audios/"+((r=t(f))==null?void 0:r.audio)});function q(r,_){g(b,!1),g(s,!0),g(i,_===t(c)),g(u,!0),g(a,!1)}function h(){let r=z();e.handleNextRound(r),g(u,!1)}function z(){let r=0;return t(i)&&(r+=1e4,r+=Math.max(-416*t(n)+8e3,2e3*.9^t(n)),r+=Math.max(-1234*t(v)+5e3,2e3*.9^t(v))),r}function F(){setInterval(()=>{t(b)&&Z(n)},1e3)}F();var M=se(),K=C(M);{var V=r=>{var _=Pe(),O=T(_);xe(O,{get time(){return t(n)},get trackSource(){return t(Q)},get volume(){return o()},get repeats(){return t(v)},get trackPaused(){return t(s)},set trackPaused(I){g(s,S(I))}});var U=k(O,2);Le(U,{get volume(){return o()},get activeTileList(){return t(Y)},get pauseTileList(){return t(E)},useTileSounds:!1,get instruments(){return t(l)},onmouseup:q});var X=k(U,2);we(X,{get volume(){return o()},set volume(I){o(I)}});var re=k(X,2);{var ae=I=>{var W=Me(),le=T(W);ge(le,{onclick:h,get GIFButtonTextSuccess(){return e.GIFButtonTextSuccess},get GIFButtonTextFailure(){return e.GIFButtonTextFailure},get volume(){return o()},get success(){return t(i)},set success(D){g(i,S(D))},get gifSoundPaused(){return t(a)},set gifSoundPaused(D){g(a,S(D))}}),B(W),m(I,W)};R(re,I=>{t(u)&&I(ae)})}B(_),m(r,_)};R(K,r=>{t(l)&&r(V)})}m(p,M),N()}export{He as G};
