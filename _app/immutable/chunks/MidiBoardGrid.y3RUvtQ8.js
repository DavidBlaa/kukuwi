import"./disclose-version.Bg9kRutz.js";import{p as N,c as y,t as p,r as x,s as B,a as P,g as d,f as S,e as k}from"./runtime.BFcw_75_.js";import{a as m,t as v,n as J}from"./template.B-ObnXcP.js";import{e as C,i as G}from"./each.CJS3MHhM.js";import{B as T,a as L,s as j,c as K}from"./Button3d.SKqD834h.js";import{b as o,p as O}from"./props.073RLZyP.js";import{s as Q,e as U}from"./render.DJfPp5iK.js";import{i as A}from"./if.BqcDyKEL.js";import{b as W}from"./instruments.rsH6nJgP.js";import"./legacy.kkaBD5aU.js";import{b as F}from"./paths.Bm-pggaX.js";import{R as X}from"./ResetButton.CUTms5SV.js";var Z=v("<div></div>"),$=v('<p class="absolute inset-x-0 bottom-[0.05rem] text-3xl font-bold text-white lg:bottom-[0.3rem] 2xl:bottom-2 2xl:text-7xl">+</p>'),ee=v('<p class="absolute inset-x-0 bottom-[0.05rem] text-3xl font-bold text-white lg:bottom-[0.3rem] 2xl:bottom-2 2xl:text-7xl">-</p>'),te=v('<div class="flex h-full w-8 flex-none flex-col items-center justify-end lg:w-10 2xl:w-24"><div class="mb-4 flex h-full w-4/6 flex-col-reverse justify-center rounded-2xl lg:mb-5 2xl:mb-7 2xl:w-1/3"></div> <!> <!></div>');function Be(_,e){N(e,!0);let l=o(e,"volume",15);const r=O(Array(10).fill(!1));let t=l()*100;for(let a=0;a<t/10;a++)r[a]=!0;function s(a){if(a){if(t>=100)return;t+=10,r[t/10-1]=!0,l(t/100)}else{if(t<=0)return;r[t/10-1]=!1,t-=10,l(t/100)}}var n=te(),i=y(n);C(i,21,()=>r,G,(a,c)=>{var u=Z();p(()=>L(u,`${(d(c)?"bg-green-500":"bg-green-100")??""} h-full w-full border-2 border-gray-500 2xl:border-4`)),m(a,u)}),x(i);var g=B(i,2);T(g,{bgFront:"bg-amber-500",bgBack:"bg-amber-700",onmouseup:()=>{},onclick:()=>s(!0),style:"rounded-full size-[2rem] lg:size-[2.7rem] lg:mb-2 2xl:size-[4.5rem] mb-2 2xl:mb-5",translateY:"translate-y-[-0.25rem] 2xl:translate-y-[-0.375rem]",padding:"relative size-[2rem] lg:size-[2.7rem] 2xl:size-[4.5rem] rounded-full",children:(a,c)=>{var u=$();m(a,u)},$$slots:{default:!0}});var f=B(g,2);T(f,{bgFront:"bg-amber-500",bgBack:"bg-amber-700",onmouseup:()=>{},onclick:()=>s(!1),style:"rounded-full size-[2rem] lg:size-[2.7rem] lg:mb-2 2xl:size-[4.5rem] mb-2 2xl:mb-5",translateY:"translate-y-[-0.25rem] 2xl:translate-y-[-0.375rem]",padding:"relative size-[2rem] lg:size-[2.7rem] 2xl:size-[4.5rem] rounded-full",children:(a,c)=>{var u=ee();m(a,u)},$$slots:{default:!0}}),x(n),m(_,n),P()}var re=J('<svg xmlns="http://www.w3.org/2000/svg" role="img"><image width="100%" height="100%" preserveAspectRatio="xMidyMid meet"></image></svg>');function ae(_,e){let l=o(e,"viewBox",8,"0 0 48 48"),r=o(e,"className",8,""),t=o(e,"src",8);var s=re(),n=y(s);x(s),p(()=>{j(s,"viewBox",l()),K(s,`icon p-2 sm:p-3 md:p-4 lg:p-5 ${r()}`),j(n,"href",t())}),m(_,s)}var le=v("<p> </p>"),oe=v("<audio></audio>"),se=v("<!> <!>",1),ie=v("<!> <!>",1);function ue(_,e){N(e,!0);let l=o(e,"is_active",7),r=o(e,"paused",7,!0),t=o(e,"active_color_top",3,"bg-blue-400"),s=o(e,"active_color_bottom",3,"[box-shadow:0_10px_0_0_#4e81bf,0_15px_0_0_#1b70f841]"),n=o(e,"passiv_color_top",3,"bg-blue-100"),i=o(e,"passiv_color_bottom",3,"bg-gray-400"),g=o(e,"use_audio",3,!0),f=o(e,"use_header",3,!0),a=o(e,"volume",3,.5);function c(b=!1){l(!l()),b||r(!r())}var u=ie(),R=S(u);{var I=b=>{var h=le(),z=y(h,!0);x(h),p(()=>{L(h,`w-fit px-1 text-xs lg:text-xl ${(l()?t():n())??""} mb-2 rounded-sm font-bold lg:mb-3`),Q(z,e.name)}),m(b,h)};A(R,b=>{f()&&b(I)})}var V=B(R,2),q=k(()=>l()?t():n()),D=k(()=>l()?s():i());return T(V,{get onmouseup(){return e.onmouseup},get bgFront(){return d(q)},get bgBack(){return d(D)},style:"flex w-full",padding:"w-full",translateY:"lg:translate-y-[-0.7rem] translate-y-[-0.4rem]",children:(b,h)=>{var z=se(),Y=S(z);ae(Y,{get src(){return e.img_url},className:"w-full"});var E=B(Y,2);{var H=M=>{var w=oe();p(()=>{j(w,"src",e.audio_url),w.volume=a()}),U("ended",w,()=>c(!0)),W(w,r),m(M,w)};A(E,M=>{g()&&M(H)})}m(b,z)},$$slots:{default:!0}}),m(_,u),P({handle_music_tile_click:c})}var me=v("<div><!></div>"),ne=v('<div></div> <div class="absolute left-6 top-0 m-3 mt-10"><!></div>',1);function ze(_,e){N(e,!0);var l=ne(),r=S(l);C(r,21,()=>e.instruments,G,(n,i,g)=>{var f=me(),a=y(f),c=k(()=>F+"/icons/instruments/"+d(i).image),u=k(()=>e.useTileSounds?"audio"in d(i)?`${F}/audios/${d(i).audio}`:`${F}/audios/${d(i).audios[0]}`:"");ue(a,{get img_url(){return d(c)},get is_active(){return e.activeTileList[g]},get use_audio(){return e.useTileSounds},get audio_url(){return d(u)},get name(){return d(i).name},use_header:!0,get paused(){return e.pauseTileList[g]},onmouseup:()=>e.onmouseup(!1,g),get volume(){return e.volume}}),x(f),p(()=>L(f,`flex max-h-[50%] flex-col items-center justify-center ${e.instruments.length>4?"basis-1/4 px-2 lg:px-5 2xl:px-8":"fhd:px-16 basis-1/2 px-4 lg:px-8"}`)),m(n,f)}),x(r);var t=B(r,2),s=y(t);X(s,{}),x(t),p(()=>L(r,`flex h-full flex-wrap self-center p-1 lg:p-3 2xl:h-[90%] ${e.instruments.length>4?"w-[72%] lg:w-full":"w-[44%] lg:w-[46%]"}`)),m(_,l),P()}export{ze as M,Be as S};
