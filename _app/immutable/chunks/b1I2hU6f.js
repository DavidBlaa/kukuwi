import{a as c,t as f,n as se,c as ue}from"./CmPotoyF.js";import{p as E,c as I,t as S,g as t,r as y,s as B,a as Q,f as A,e as w,b as g,u as $,d as p}from"./6JMBiHYb.js";import{i as N}from"./C-PgMaZH.js";import{b as v,p as F}from"./CWcK6JqJ.js";import{o as ne}from"./Be6afn5i.js";import{e as te,i as re}from"./Dn6whdxK.js";import{a as Y,B as J,s as O,c as ie}from"./qzfPYBVn.js";import{s as de,e as me}from"./B0IBxgL7.js";import{b as ve,c as ce,d as ge,G as fe}from"./DORJG-LQ.js";import"./BJMztX48.js";import{b as j}from"./C0ubwFn-.js";import{R as be,M as xe}from"./CpaBLRS4.js";import{k as ee}from"./C_kQ09Xn.js";var _e=f("<div></div>"),he=f('<p class="absolute inset-x-0 bottom-[0.05rem] text-3xl font-bold text-white lg:bottom-[0.3rem] 2xl:bottom-2 2xl:text-7xl">+</p>'),pe=f('<p class="absolute inset-x-0 bottom-[0.05rem] text-3xl font-bold text-white lg:bottom-[0.3rem] 2xl:bottom-2 2xl:text-7xl">-</p>'),we=f('<div class="flex h-full w-8 flex-none flex-col items-center justify-end lg:w-10 2xl:w-24"><div class="mb-4 flex h-full w-4/6 flex-col-reverse justify-center rounded-2xl lg:mb-5 2xl:mb-7 2xl:w-1/3"></div> <!> <!></div>');function ye(_,e){E(e,!0);let l=v(e,"volume",15);const o=F(Array(10).fill(!1));let a=l()*100;for(let s=0;s<a/10;s++)o[s]=!0;function u(s){if(s){if(a>=100)return;a+=10,o[a/10-1]=!0,l(a/100)}else{if(a<=0)return;o[a/10-1]=!1,a-=10,l(a/100)}}var i=we(),n=I(i);te(n,21,()=>o,re,(s,m)=>{var d=_e();S(()=>Y(d,`${(t(m)?"bg-green-500":"bg-green-100")??""} h-full w-full border-2 border-gray-500 2xl:border-4`)),c(s,d)}),y(n);var b=B(n,2);J(b,{bgFront:"bg-amber-500",bgBack:"bg-amber-700",onmouseup:()=>{},onclick:()=>u(!0),style:"rounded-full size-[2rem] lg:size-[2.7rem] lg:mb-2 2xl:size-[4.5rem] mb-2 2xl:mb-5",translateY:"translate-y-[-0.25rem] 2xl:translate-y-[-0.375rem]",padding:"relative size-[2rem] lg:size-[2.7rem] 2xl:size-[4.5rem] rounded-full",children:(s,m)=>{var d=he();c(s,d)},$$slots:{default:!0}});var x=B(b,2);J(x,{bgFront:"bg-amber-500",bgBack:"bg-amber-700",onmouseup:()=>{},onclick:()=>u(!1),style:"rounded-full size-[2rem] lg:size-[2.7rem] lg:mb-2 2xl:size-[4.5rem] mb-2 2xl:mb-5",translateY:"translate-y-[-0.25rem] 2xl:translate-y-[-0.375rem]",padding:"relative size-[2rem] lg:size-[2.7rem] 2xl:size-[4.5rem] rounded-full",children:(s,m)=>{var d=pe();c(s,d)},$$slots:{default:!0}}),y(i),c(_,i),Q()}var Be=se('<svg xmlns="http://www.w3.org/2000/svg" role="img"><image width="100%" height="100%" preserveAspectRatio="xMidyMid meet"></image></svg>');function ke(_,e){let l=v(e,"viewBox",8,"0 0 48 48"),o=v(e,"className",8,""),a=v(e,"src",8);var u=Be(),i=I(u);y(u),S(()=>{O(u,"viewBox",l()),ie(u,`icon p-2 sm:p-3 md:p-4 lg:p-5 ${o()}`),O(i,"href",a())}),c(_,u)}var ze=f("<p> </p>"),Ie=f("<audio></audio>"),Te=f("<!> <!>",1),Fe=f("<!> <!>",1);function Se(_,e){E(e,!0);let l=v(e,"is_active",7),o=v(e,"paused",7,!0),a=v(e,"active_color_top",3,"bg-blue-400"),u=v(e,"active_color_bottom",3,"[box-shadow:0_10px_0_0_#4e81bf,0_15px_0_0_#1b70f841]"),i=v(e,"passiv_color_top",3,"bg-blue-100"),n=v(e,"passiv_color_bottom",3,"bg-gray-400"),b=v(e,"use_audio",3,!0),x=v(e,"use_header",3,!0),s=v(e,"volume",3,.5);function m(h=!1){l(!l()),h||o(!o())}var d=Fe(),M=A(d);{var P=h=>{var k=ze(),T=I(k,!0);y(k),S(()=>{Y(k,`w-fit px-1 text-xs lg:text-xl ${(l()?a():i())??""} mb-2 rounded-sm font-bold lg:mb-3`),de(T,e.name)}),c(h,k)};N(M,h=>{x()&&h(P)})}var K=B(M,2),V=w(()=>l()?a():i()),W=w(()=>l()?u():n());return J(K,{get onmouseup(){return e.onmouseup},get bgFront(){return t(V)},get bgBack(){return t(W)},style:"flex w-full",padding:"w-full",translateY:"lg:translate-y-[-0.7rem] translate-y-[-0.4rem]",children:(h,k)=>{var T=Te(),C=A(T);ke(C,{get src(){return e.img_url},className:"w-full"});var R=B(C,2);{var q=G=>{var r=Ie();S(()=>{O(r,"src",e.audio_url),r.volume=s()}),me("ended",r,()=>m(!0)),ve(r,o),c(G,r)};N(R,G=>{b()&&G(q)})}c(h,T)},$$slots:{default:!0}}),c(_,d),Q({handle_music_tile_click:m})}var Ge=f("<div><!></div>"),Le=f('<div></div> <div class="absolute left-6 top-0 m-3 mt-10"><!></div>',1);function Me(_,e){E(e,!0);var l=Le(),o=A(l);te(o,21,()=>e.instruments,re,(i,n,b)=>{var x=Ge(),s=I(x),m=w(()=>j+"/icons/instruments/"+t(n).image),d=w(()=>e.useTileSounds?"audio"in t(n)?`${j}/audios/${t(n).audio}`:`${j}/audios/${t(n).audios[0]}`:"");Se(s,{get img_url(){return t(m)},get is_active(){return e.activeTileList[b]},get use_audio(){return e.useTileSounds},get audio_url(){return t(d)},get name(){return t(n).name},use_header:!0,get paused(){return e.pauseTileList[b]},onmouseup:()=>e.onmouseup(!1,b),get volume(){return e.volume}}),y(x),S(()=>Y(x,`flex max-h-[50%] flex-col items-center justify-center ${e.instruments.length>4?"basis-1/4 px-2 lg:px-5 2xl:px-8":"fhd:px-16 basis-1/2 px-4 lg:px-8"}`)),c(i,x)}),y(o);var a=B(o,2),u=I(a);be(u,{}),y(a),S(()=>Y(o,`flex h-full flex-wrap self-center p-1 lg:p-3 2xl:h-[90%] ${e.instruments.length>4?"w-[72%] lg:w-full":"w-[44%] lg:w-[46%]"}`)),c(_,l),Q()}var Pe=f('<div class="absolute left-0 top-0"><!></div>'),Ce=f('<div class="flex size-full justify-between gap-4 rounded-2xl border-x-[7px] border-b-[14px] border-t-[7px] border-b-gray-600 border-l-gray-200 border-r-gray-400 border-t-gray-400 bg-[#d1d5db] p-3 shadow-2xl lg:border-x-[10px] lg:border-b-[20px] lg:border-t-[10px] lg:p-10"><!> <!> <!> <!></div>');function Je(_,e){E(e,!0);let l=v(e,"volume",15),o=p(!0),a=p(!0),u=p(!1),i=p(!1),n=p(0),b=p(!0),x=0,s=p(0),m=p(void 0),d=p(void 0);ne(()=>{g(m,F(ce(ee[e.difficulty-1].instruments,ee[e.difficulty-1].sameCategory))),g(d,F(ge(t(m)))),g(o,!1),$(s)});let M=w(()=>{var r;return(r=t(d))==null?void 0:r.index}),P=w(()=>{var r;return(r=t(m))==null?void 0:r.length});const K=w(()=>Array(t(P)).fill(!1)),V=w(()=>Array(t(P)).fill(!0));let W=w(()=>{var r;return j+"/audios/"+((r=t(d))==null?void 0:r.audio)});function h(r,L){g(b,!1),g(o,!0),g(i,L===t(M)),g(u,!0),g(a,!1)}function k(){let r=T();e.handleNextRound(r),g(u,!1)}function T(){let r=0;return t(i)&&(r+=1e4,r+=Math.max(-416*t(n)+8e3,2e3*.9^t(n)),r+=Math.max(-1234*t(s)+5e3,2e3*.9^t(s))),r}function C(){setInterval(()=>{t(b)&&$(n)},1e3)}C();var R=ue(),q=A(R);{var G=r=>{var L=Ce(),U=I(L);xe(U,{get time(){return t(n)},get trackSource(){return t(W)},get volume(){return l()},get tries(){return x},get repeats(){return t(s)},get trackPaused(){return t(o)},set trackPaused(z){g(o,F(z))}});var X=B(U,2);Me(X,{get volume(){return l()},get activeTileList(){return t(K)},get pauseTileList(){return t(V)},useTileSounds:!1,get instruments(){return t(m)},onmouseup:h});var Z=B(X,2);ye(Z,{get volume(){return l()},set volume(z){l(z)}});var ae=B(Z,2);{var le=z=>{var D=Pe(),oe=I(D);fe(oe,{onclick:k,get GIFButtonTextSuccess(){return e.GIFButtonTextSuccess},get GIFButtonTextFailure(){return e.GIFButtonTextFailure},get volume(){return l()},get success(){return t(i)},set success(H){g(i,F(H))},get gifSoundPaused(){return t(a)},set gifSoundPaused(H){g(a,F(H))}}),y(D),c(z,D)};N(ae,z=>{t(u)&&z(le)})}y(L),c(r,L)};N(q,r=>{t(m)&&r(G)})}c(_,R),Q()}export{Je as G};
