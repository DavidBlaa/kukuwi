import"../chunks/disclose-version.Bg9kRutz.js";import{ad as oe,i as le,D as ue,a7 as fe,c as m,r as v,t as V,g as t,p as te,s as x,n as Z,a as re,b as F,d as z,f as E,e as M,u as de}from"../chunks/runtime.BF1lsdxA.js";import{g as ce,s as ae}from"../chunks/render.BxGQUWuo.js";import{i as B}from"../chunks/if.B6rBiUnJ.js";import{a as d,t as h,b as q,c as C}from"../chunks/template.sUr9O-vt.js";import{b as ve,p as D}from"../chunks/props.BJTZrMLw.js";import{o as ge}from"../chunks/index-client.CXdwGFqR.js";import{G as me}from"../chunks/GuessingGame.CEOkZetw.js";import{e as xe,i as he}from"../chunks/each.C-h4Xvgg.js";import{s as be,B as J}from"../chunks/Button3d.wjt0wZGt.js";import{I as pe,F as _e}from"../chunks/Icon.DQQCSNUh.js";import{P as ye}from"../chunks/PatternGame.CMO6Vflr.js";import{r as ke}from"../chunks/attributes.CFH_xOM_.js";import{h as K}from"../chunks/HighscoreStore.CSHnnE02.js";import{g as O}from"../chunks/entry.BX5ZIsgi.js";import{b as X}from"../chunks/paths.COvWp3PK.js";function Fe(e,n,i=n){var s=oe();ce(e,"input",a=>{var r=a?e.defaultValue:e.value;if(r=A(e)?U(r):r,i(r),s&&r!==(r=n())){var o=e.selectionStart,l=e.selectionEnd;e.value=r??"",l!==null&&(e.selectionStart=o,e.selectionEnd=Math.min(l,e.value.length))}}),(le&&e.defaultValue!==e.value||ue(n)==null&&e.value)&&i(A(e)?U(e.value):e.value),fe(()=>{var a=n();A(e)&&a===U(e.value)||e.type==="date"&&!a&&!e.value||a!==e.value&&(e.value=a??"")})}function A(e){var n=e.type;return n==="number"||n==="range"}function U(e){return e===""?null:+e}const Y=[{game:"klangQuiz",difficulty:1},{game:"klangQuiz",difficulty:2},{game:"pattern",difficulty:1},{game:"klangQuiz",difficulty:4},{game:"pattern",difficulty:2},{game:"klangQuiz",difficulty:3},{game:"pattern",difficulty:3},{game:"klangQuiz",difficulty:2},{game:"klangQuiz",difficulty:4},{game:"pattern",difficulty:2}];var ze=h("<div><!></div>"),Be=h('<div class="flex w-4/5"></div>');function we(e,n){var i=Be();xe(i,21,()=>n.roundHistory,he,(s,a,r)=>{var o=ze(),l=m(o);{var b=g=>{pe(g,{size:"80%",color:"#525252",src:_e})};B(l,g=>{r===n.round-1&&g(b)})}v(o),V(()=>be(o,`mx-[0.2rem] flex h-8 w-[10%] items-center justify-center border-2 border-neutral-600 ${t(a)?"bg-green-500":t(a)===!1?"bg-red-500":"bg-neutral-100"}`)),d(s,o)}),v(i),d(e,i)}var Ge=h('<div class="fixed inset-0 z-50 flex items-center justify-center"><div class="absolute inset-0 bg-black opacity-50"></div> <div class="z-50 flex h-3/5 w-2/5 flex-col items-center justify-evenly rounded-2xl bg-kukuwi-blue shadow-xl"><div class="text-center"><h2 class="text-4xl font-bold text-white">Punktzahl:</h2> <h2 class="mt-5 text-8xl font-extrabold text-yellow-500 drop-shadow-[0_4px_4px_rgba(0,0,0,0.8)]"> </h2></div> <input class="z-60 basis-1/12 rounded-2xl border-black bg-white text-center text-2xl" placeholder="Spielername eingeben"> <div class="flex flex-col gap-y-4 text-3xl text-white"><!> <!></div></div></div>');function ee(e,n){te(n,!0);let i=ve(n,"score",3,4e3),s=z("");function a(){K&&K.update(u=>{for(const G of u)G.highlight=!1;return u.push({name:t(s),points:i(),highlight:!0}),u}),O(X+"/Bestenliste")}var r=Ge(),o=x(m(r),2),l=m(o),b=x(m(l),2),g=m(b,!0);v(b),v(l);var p=x(l,2);ke(p);var w=x(p,2),_=m(w);J(_,{bgBack:"bg-green-600",bgFront:"bg-green-500",onclick:a,padding:"p-3",children:(u,G)=>{Z();var I=q("Abschicken");d(u,I)},$$slots:{default:!0}});var Q=x(_,2);J(Q,{bgBack:"bg-red-600",bgFront:"bg-red-500",onclick:()=>O(X+"/"),padding:"p-3",children:(u,G)=>{Z();var I=q("Überspringen");d(u,I)},$$slots:{default:!0}}),v(w),v(o),v(r),V(()=>ae(g,i())),Fe(p,()=>t(s),u=>F(s,u)),d(e,r),re()}var Ie=h('<div class="flex size-full flex-col items-center justify-center gap-28"><h1 class="text-9xl font-extrabold text-neutral-600"> </h1> <!></div>'),Se=h("<!> <!>",1),Pe=h("<!> <!>",1),Qe=h("<p>Wrong game specified in playthrough.ts!</p>"),Te=h('<main class="h-screen w-screen bg-blue-200 p-5"><!></main>');function Je(e,n){te(n,!0);const i=Y.length;let s=z(1),a=M(()=>Y[t(s)-1]),r=z(!1),o=z(.4),l=z(0),b=D(Array(i).fill(void 0)),g=z(!0);ge(()=>p());function p(){F(g,!0),setTimeout(c,2e3);function c(){F(g,!1)}}function w(c){F(l,t(l)+c),b[t(s)-1]=c!==0,t(s)===i?F(r,!0):(de(s),p())}const _=M(()=>t(s)===i?"Zum Ergebnis":"Nächste Runde"),Q=M(()=>t(_));var u=Te(),G=m(u);{var I=c=>{var y=Ie(),S=m(y),j=m(S);v(S);var N=x(S,2);we(N,{get roundHistory(){return b},get round(){return t(s)}}),v(y),V(()=>ae(j,`RUNDE ${t(s)??""}`)),d(c,y)},ne=c=>{var y=C(),S=E(y);{var j=k=>{var P=Se(),T=E(P);me(T,{get difficulty(){return t(a).difficulty},handleNextRound:w,get GIFButtonTextSuccess(){return t(_)},get GIFButtonTextFailure(){return t(Q)},get volume(){return t(o)},set volume(f){F(o,D(f))}});var $=x(T,2);{var H=f=>{ee(f,{get score(){return t(l)}})};B($,f=>{t(r)&&f(H)})}d(k,P)},N=k=>{var P=C(),T=E(P);{var $=f=>{var R=Pe(),W=E(R);ye(W,{get difficulty(){return t(a).difficulty},handleNextRound:w,get volume(){return t(o)},get GIFButtonTextSuccess(){return t(_)},get GIFButtonTextFailure(){return t(Q)}});var se=x(W,2);{var ie=L=>{ee(L,{get score(){return t(l)}})};B(se,L=>{t(r)&&L(ie)})}d(f,R)},H=f=>{var R=Qe();d(f,R)};B(T,f=>{t(a).game==="pattern"?f($):f(H,!1)},!0)}d(k,P)};B(S,k=>{t(a).game==="klangQuiz"?k(j):k(N,!1)},!0)}d(c,y)};B(G,c=>{t(g)?c(I):c(ne,!1)})}v(u),d(e,u),re()}export{Je as component};
