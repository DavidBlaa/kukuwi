import{a as j,t as G}from"../chunks/CHkck4dw.js";import{c as n,r as d,q as _,t as J,p as L,b as v,a as q,g as e,s as o,d as N}from"../chunks/BjWHaepb.js";import{i as V}from"../chunks/C6Z4-7cA.js";import{e as H,i as K}from"../chunks/C6vC90Bg.js";import{b as O,p as g,s as Q,a as U}from"../chunks/C6ycZBfC.js";import{d as W}from"../chunks/IyUyzwpQ.js";import{a as F,s as C}from"../chunks/Bop7QRR4.js";import{b as X,R as Y,g as Z,a as M,s as $,G as ee}from"../chunks/CuiplVon.js";import{b as y}from"../chunks/C3By-Gyw.js";import{o as ae}from"../chunks/nRd-gLFk.js";import{g as se}from"../chunks/6YAFCxBX.js";import{e as te,p as re}from"../chunks/C7w_qK0i.js";import{g as oe}from"../chunks/pYmuwNoa.js";var ie=G('<div class="flex flex-col items-center justify-center justify-items-center"><button class="perspective-1000 flex h-[200px] w-[200px] cursor-pointer flex-col items-center justify-center svelte-zysx8r"><div><div class="backface-hidden absolute h-full w-full rounded-l border-4 border-blue-900 svelte-zysx8r"><img alt="Front" class="h-full w-full object-cover shadow-lg"></div> <div><img alt="Back" class="h-full w-full object-cover shadow-lg"></div></div> <audio></audio></button></div>');function ne(k,i){let w=O(i,"paused",15,!0);var h=ie(),c=n(h);c.__mouseup=function(...x){var P;(P=i.onmouseup)==null||P.apply(this,x)};var a=n(c),l=n(a),u=n(l);F(u,"src",y+"/icons/Memory/200w/Front200.webp"),d(l);var m=_(l,2),p=n(m);d(m),d(a);var f=_(a,2);d(c),d(h),J(()=>{c.disabled=i.finished,C(a,`${`transform-style-3d absolute h-full w-full transition-transform duration-500 ${i.isRotated?"rotate-y-180":""}`??""} svelte-zysx8r`),C(m,`backface-hidden rotate-y-180 absolute h-full w-full transform rounded-l border-4 ${(i.finished?"border-gray-600":"border-green-700")??""} svelte-zysx8r`),F(p,"src",i.finished?y+"/icons/Memory/200w/Back-Gray200.webp":y+"/icons/Memory/200w/Back200.webp"),F(f,"src",y+i.audioSource)}),X(f,w),j(k,h)}W(["mouseup"]);const de=[{genre:"Jazz",audioPaths:["Drums - Jazz Break 125 bpm.mp3"]},{genre:"Funk",audioPaths:["Bs1 Funk Cmaj 124bpm.mp3"]},{genre:"Punk",audioPaths:["Gt1 Punk Emaj 170bpm.mp3"]},{genre:"Blues",audioPaths:["Piano Phrase Blues Sky Eb Minor 92bpm.mp3"]},{genre:"African Funk",audioPaths:["Bs1 AfricanFunk Gm 120bpm.mp3"]},{genre:"Rock",audioPaths:["Drums - Rock 72 bpm.mp3"]},{genre:"Chill",audioPaths:["Gt1 Chill Bm 108bpm.mp3"]},{genre:"Piano",audioPaths:["Piano Phrase Lazy Day IV-I Ab Major 105 bpm.mp3"]}];var ue=G('<div class="absolute left-0 top-0"><!></div>'),le=G('<div class="flex h-screen w-screen flex-col items-center justify-center justify-items-center"><div class="relative grid h-fit w-fit grid-cols-4 gap-5 rounded-xl bg-gray-300 px-20 py-8"><!> <div class="absolute left-0 top-0 m-3"><!></div></div> <!></div>');function xe(k,i){L(i,!0);const[w,h]=Q(),c=()=>U(re,"$page",w);let a=v(g([])),l=v(-1),u=v(0),m=v(""),p=v(0),f=v(!1),x=1;function P(){se(y+"/")}ae(()=>{const s=c().url.searchParams.get("difficulty");s===null&&te(404,{message:"No difficulty defined in search params."});const t=parseInt(s),b=oe[t-1].pairs;for(const r of Z(de,b))e(a).push({index:-1,genre:r.genre,paused:!0,isRotated:!1,audioPath:r.audioPaths[M(r.audioPaths)],finished:!1}),e(a).push({index:-1,genre:r.genre,paused:!0,isRotated:!1,audioPath:r.audioPaths[M(r.audioPaths)],finished:!1});o(a,g($(e(a))));for(const[r,E]of e(a).entries())E.index=r;o(p,g(e(a).length))});function S(s){if(!e(a)[s].finished&&e(l)!=s){if(e(u)==2){o(u,0);for(const t of e(a))t.finished||(t.isRotated=!1)}for(const t of e(a))t.paused=!0;if(e(a)[s].isRotated=!e(a)[s].isRotated,e(a)[s].paused=!e(a)[s].paused,e(u)==0?(o(u,1),o(m,g(e(a)[s].genre)),o(l,g(s))):e(u)==1&&(o(u,2),e(m)===e(a)[s].genre&&(e(a)[s].finished=!0,e(a)[e(l)].finished=!0,o(p,e(p)-2))),e(p)==0){for(const t of e(a))t.paused=!0;o(f,!0)}}}var R=le(),B=n(R),z=n(B);H(z,17,()=>e(a),K,(s,t)=>{const b=N(()=>"/audios/"+e(t).audioPath);ne(s,{get isRotated(){return e(t).isRotated},get paused(){return e(t).paused},onmouseup:()=>S(e(t).index),get audioSource(){return e(b)},get finished(){return e(t).finished}})});var I=_(z,2),D=n(I);Y(D,{}),d(I),d(B);var A=_(B,2);{var T=s=>{var t=ue(),b=n(t);ee(b,{onclick:P,GIFButtonTextSuccess:"Gewonnen",GIFButtonTextFailure:" ",gifSoundPaused:!1,get volume(){return x},get success(){return e(f)},set success(r){o(f,g(r))}}),d(t),j(s,t)};V(A,s=>{e(f)&&s(T)})}d(R),j(k,R),q(),h()}export{xe as component};
