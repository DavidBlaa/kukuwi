import{b as Z,a as f,t as y,c as q}from"../chunks/DfTT688q.js";import{a7 as ie,j as ue,$ as de,aH as ce,p as $,e as _,c as m,r as g,n as C,t as U,a as ee,g as t,s as h,b as p,f as H,d as M,u as fe}from"../chunks/Dfz2pn-t.js";import{i as z}from"../chunks/Ce-GrUEF.js";import{b as ve,p as T}from"../chunks/JPq0Qgxn.js";import{o as ge}from"../chunks/CTyNSiTG.js";import{G as me}from"../chunks/Cq4ktYhT.js";import{P as xe}from"../chunks/CavinUHZ.js";import{l as be,s as A}from"../chunks/Cnw4lcUB.js";import{r as he,B as J,s as _e}from"../chunks/oc7oq8_q.js";import{h as K}from"../chunks/B61-u6X7.js";import{g as O}from"../chunks/TdVxMHhl.js";import{b as X}from"../chunks/D9Oaqg0A.js";import{e as pe,i as ye}from"../chunks/BtiK7hFz.js";import{I as ke,F as Se}from"../chunks/Df94tsck.js";function we(e,r,l=r){var i=ie();be(e,"input",a=>{var n=a?e.defaultValue:e.value;if(n=N(e)?L(n):n,l(n),i&&n!==(n=r())){var s=e.selectionStart,o=e.selectionEnd;e.value=n??"",o!==null&&(e.selectionStart=s,e.selectionEnd=Math.min(o,e.value.length))}}),(ue&&e.defaultValue!==e.value||de(r)==null&&e.value)&&l(N(e)?L(e.value):e.value),ce(()=>{var a=r();N(e)&&a===L(e.value)||e.type==="date"&&!a&&!e.value||a!==e.value&&(e.value=a??"")})}function N(e){var r=e.type;return r==="number"||r==="range"}function L(e){return e===""?null:+e}const Y=[{game:"klangQuiz",difficulty:1},{game:"klangQuiz",difficulty:2},{game:"pattern",difficulty:1},{game:"klangQuiz",difficulty:4},{game:"pattern",difficulty:2},{game:"klangQuiz",difficulty:3},{game:"pattern",difficulty:3},{game:"klangQuiz",difficulty:2},{game:"klangQuiz",difficulty:4},{game:"pattern",difficulty:2}];var Fe=y('<div class="fixed inset-0 z-50 flex items-center justify-center"><div class="absolute inset-0 bg-black opacity-50"></div> <div class="z-50 flex h-3/5 w-2/5 flex-col items-center justify-evenly rounded-2xl bg-kukuwi-blue shadow-xl"><div class="text-center"><h2 class="text-4xl font-bold text-white">Punktzahl:</h2> <h2 class="mt-5 text-8xl font-extrabold text-yellow-500 drop-shadow-[0_4px_4px_rgba(0,0,0,0.8)]"> </h2></div> <input class="z-60 basis-1/12 rounded-2xl border-black bg-white text-center text-2xl" placeholder="Spielername eingeben"> <div class="flex flex-col gap-y-4 text-3xl text-white"><!> <!></div></div></div>');function D(e,r){$(r,!0);let l=ve(r,"score",3,4e3),i=p("");function a(){K&&K.update(d=>{for(const w of d)w.highlight=!1;return d.push({name:t(i),points:l(),highlight:!0}),d}),O(X+"/Bestenliste")}var n=Fe(),s=_(m(n),2),o=m(s),x=_(m(o),2),u=m(x,!0);g(x),g(o);var b=_(o,2);he(b);var k=_(b,2),S=m(k);J(S,{bgBack:"bg-green-600",bgFront:"bg-green-500",onclick:a,padding:"p-3",children:(d,w)=>{C();var G=Z("Abschicken");f(d,G)},$$slots:{default:!0}});var B=_(S,2);J(B,{bgBack:"bg-red-600",bgFront:"bg-red-500",onclick:()=>O(X+"/"),padding:"p-3",children:(d,w)=>{C();var G=Z("Überspringen");f(d,G)},$$slots:{default:!0}}),g(k),g(s),g(n),U(()=>A(u,l())),we(b,()=>t(i),d=>h(i,d)),f(e,n),ee()}var ze=y("<div><!></div>"),Be=y('<div class="flex w-4/5"></div>');function Ge(e,r){var l=Be();pe(l,21,()=>r.roundHistory,ye,(i,a,n)=>{var s=ze(),o=m(s);{var x=u=>{ke(u,{size:"80%",color:"#525252",src:Se})};z(o,u=>{n===r.round-1&&u(x)})}g(s),U(()=>_e(s,`mx-[0.2rem] flex h-8 w-[10%] items-center justify-center border-2 border-neutral-600 ${t(a)?"bg-green-500":t(a)===!1?"bg-red-500":"bg-neutral-100"}`)),f(i,s)}),g(l),f(e,l)}var Ie=y('<div class="flex size-full flex-col items-center justify-center gap-12"><h1 class="text-9xl font-extrabold text-neutral-600"> </h1> <p class="mb-8 text-7xl font-extrabold text-yellow-500 drop-shadow-[0_4px_4px_rgba(0,0,0,0.8)]"> </p> <!></div>');function Te(e,r){let l=p(T(r.oldScore));const i=(r.totalScore-r.oldScore)/100;let a=0,n=setInterval(()=>{h(l,t(l)+i),a++,a>=100&&(h(l,T(r.totalScore)),clearInterval(n))},10);var s=Ie(),o=m(s),x=m(o);g(o);var u=_(o,2),b=m(u,!0);g(u);var k=_(u,2);Ge(k,{get roundHistory(){return r.roundHistory},get round(){return r.round}}),g(s),U(S=>{A(x,`RUNDE ${r.round??""}`),A(b,S)},[()=>Math.round(t(l))]),f(e,s)}var Pe=y("<!> <!>",1),Qe=y("<!> <!>",1),He=y("<p>Wrong game specified in playthrough.ts!</p>"),Re=y('<main class="h-screen w-screen bg-blue-200 p-5"><!></main>');function Oe(e,r){$(r,!0);const l=Y.length;let i=p(1),a=M(()=>Y[t(i)-1]),n=p(!1),s=p(.4),o=p(0),x=p(0),u=T(Array(l).fill(void 0)),b=p(!0);ge(()=>k());function k(){h(b,!0),setTimeout(v,2e3);function v(){h(b,!1)}}function S(v){h(x,T(t(o))),h(o,t(o)+v),u[t(i)-1]=v!==0,t(i)===l?h(n,!0):(fe(i),k())}const B=M(()=>t(i)===l?"Zum Ergebnis":"Nächste Runde"),d=M(()=>t(B));var w=Re(),G=m(w);{var te=v=>{Te(v,{get roundHistory(){return u},get round(){return t(i)},get totalScore(){return t(o)},get oldScore(){return t(x)}})},re=v=>{var V=q(),ae=H(V);{var ne=F=>{var I=Pe(),P=H(I);me(P,{get difficulty(){return t(a).difficulty},handleNextRound:S,get GIFButtonTextSuccess(){return t(B)},get GIFButtonTextFailure(){return t(d)},get volume(){return t(s)},set volume(c){h(s,T(c))}});var R=_(P,2);{var j=c=>{D(c,{get score(){return t(o)}})};z(R,c=>{t(n)&&c(j)})}f(F,I)},oe=F=>{var I=q(),P=H(I);{var R=c=>{var Q=Qe(),W=H(Q);xe(W,{get difficulty(){return t(a).difficulty},handleNextRound:S,get volume(){return t(s)},get GIFButtonTextSuccess(){return t(B)},get GIFButtonTextFailure(){return t(d)}});var le=_(W,2);{var se=E=>{D(E,{get score(){return t(o)}})};z(le,E=>{t(n)&&E(se)})}f(c,Q)},j=c=>{var Q=He();f(c,Q)};z(P,c=>{t(a).game==="pattern"?c(R):c(j,!1)},!0)}f(F,I)};z(ae,F=>{t(a).game==="klangQuiz"?F(ne):F(oe,!1)},!0)}f(v,V)};z(G,v=>{t(b)?v(te):v(re,!1)})}g(w),f(e,w),ee()}export{Oe as component};
