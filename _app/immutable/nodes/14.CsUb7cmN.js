import{c as O,a as d,t as p}from"../chunks/disclose-version.BlfRRn3x.js";import{p as ee,ab as a,x as e,ao as V,f as A,a as te,aa as s,c as y,r as m,s as R,z as I,Z as re}from"../chunks/runtime.BZDbob96.js";import{s as se}from"../chunks/render.DhTGtpIM.js";import{i as F}from"../chunks/if.DhnByTD-.js";import{p as ie,a as z}from"../chunks/props.BH0R1WOI.js";import{o as ae}from"../chunks/index-client.CBR9gwgh.js";import{M as ue,S as oe}from"../chunks/MidiBoardGrid.5shXhXpG.js";import{g as le,s as de,M as fe,G as ce,P as me}from"../chunks/PatternGame.CxrAn6kg.js";import{b as ge}from"../chunks/paths.jZZZWFxg.js";import{e as ve,i as ye}from"../chunks/each.CaWgedCa.js";import{s as pe}from"../chunks/class.CbU5o3FF.js";import{I as xe,F as _e}from"../chunks/Icon.f-8mEN14.js";import{N as X}from"../chunks/NameInput.CMsoREp3.js";const Y=[{game:"klangQuiz",difficulty:1},{game:"klangQuiz",difficulty:2},{game:"pattern",difficulty:1},{game:"klangQuiz",difficulty:3},{game:"pattern",difficulty:2},{game:"klangQuiz",difficulty:4},{game:"pattern",difficulty:3},{game:"klangQuiz",difficulty:2},{game:"klangQuiz",difficulty:3},{game:"pattern",difficulty:2}],$=[{difficulty:"einfach",instruments:4,sameCategory:!1},{difficulty:"mittel",instruments:6,sameCategory:!1},{difficulty:"schwer",instruments:8,sameCategory:!1},{difficulty:"sehr schwer",instruments:3,sameCategory:!0}];var be=p('<div class="absolute left-0 top-0"><!></div>'),he=p('<div class="[rotate-y-20deg] flex size-full justify-evenly rounded-2xl border-x-[10px] border-b-[20px] border-t-[10px] border-b-gray-600 border-l-gray-200 border-r-gray-400 border-t-gray-400 bg-[#d1d5db] p-3 shadow-2xl lg:p-10"><div class="basis-2/12"><!></div> <div class="basis-8/12"><!></div> <div class="basis-1/12"><!></div> <!></div>');function Ie(w,l){ee(l,!0);let i=ie(l,"volume",15),n=s(!0),f=s(!0),x=s(!1),u=s(!1),g=s(0),G=s(!0),v=0,M=s(0),_=s(void 0),k=s(void 0);ae(()=>{a(_,z(le($[l.difficulty-1].instruments,$[l.difficulty-1].sameCategory))),a(k,z(de(e(_)))),a(n,!1),V(M)});let H=I(()=>{var t;return(t=e(k))==null?void 0:t.index}),P=I(()=>{var t;return(t=e(_))==null?void 0:t.length});const W=I(()=>Array(e(P)).fill(!1)),Z=I(()=>Array(e(P)).fill(!0));let D=I(()=>{var t;return ge+"/audios/"+((t=e(k))==null?void 0:t.audio)});function o(t,c){a(G,!1),a(n,!0),a(u,c===e(H)),a(x,!0),a(f,!1)}function b(){const t=e(u)?1e3:0;l.handleNextRound(t)}function T(){setInterval(()=>{e(G)&&V(g)},1e3)}T();var C=O(),N=A(C);{var h=t=>{var c=he(),B=y(c),E=y(B);fe(E,{get time(){return e(g)},get trackSource(){return e(D)},get volume(){return i()},get tries(){return v},get repeats(){return e(M)},get trackPaused(){return e(n)},set trackPaused(S){a(n,z(S))}}),m(B);var r=R(B,2),Q=y(r);ue(Q,{get volume(){return i()},get activeTileList(){return e(W)},get pauseTileList(){return e(Z)},useTileSounds:!1,get instruments(){return e(_)},onmouseup:o}),m(r);var L=R(r,2),K=y(L);oe(K,{get volume(){return i()},set volume(S){i(S)}}),m(L);var U=R(L,2);{var j=S=>{var q=be(),ne=y(q);ce(ne,{onclick:b,get GIFButtonTextSuccess(){return l.GIFButtonTextSuccess},get GIFButtonTextFailure(){return l.GIFButtonTextFailure},get volume(){return i()},get success(){return e(u)},set success(J){a(u,z(J))},get gifSoundPaused(){return e(f)},set gifSoundPaused(J){a(f,z(J))}}),m(q),d(S,q)};F(U,S=>{e(x)&&S(j)})}m(c),d(t,c)};F(N,t=>{e(_)&&t(h)})}d(w,C),te()}var Fe=p("<div><!></div>"),Ge=p('<div class="flex w-4/5"></div>');function ke(w,l){var i=Ge();ve(i,21,()=>l.roundHistory,ye,(n,f,x)=>{var u=Fe(),g=y(u);{var G=v=>{xe(v,{size:"80%",color:"#525252",src:_e})};F(g,v=>{x===l.round-1&&v(G)})}m(u),re(()=>pe(u,`mx-[0.2rem] flex h-8 w-[10%] items-center justify-center border-2 border-neutral-600 ${e(f)?"bg-green-500":e(f)===!1?"bg-red-500":"bg-neutral-100"}`)),d(n,u)}),m(i),d(w,i)}var Te=p('<div class="flex size-full flex-col items-center justify-center gap-28"><h1 class="text-9xl font-extrabold text-neutral-600"> </h1> <!></div>'),Be=p("<!> <!>",1),Se=p("<!> <!>",1),ze=p("<p>Wrong game specified in playthrough.ts!</p>"),Pe=p('<main class="h-screen w-screen bg-blue-200 p-5"><!></main>');function De(w,l){ee(l,!0);const i=Y.length;let n=s(1),f=I(()=>Y[e(n)-1]),x=s(!1),u=s(.4),g=s(0),G=z(Array(i).fill(void 0)),v=s(!0);ae(()=>M());function M(){a(v,!0),setTimeout(o,2e3);function o(){a(v,!1)}}function _(o){a(g,e(g)+o),G[e(n)-1]=o!==0,e(n)===i?a(x,!0):(V(n),M())}const k=I(()=>e(n)===i?"Zum Ergebnis":"NÃ¤chste Runde"),H=I(()=>e(k));var P=Pe(),W=y(P);{var Z=o=>{var b=Te(),T=y(b),C=y(T);m(T);var N=R(T,2);ke(N,{get roundHistory(){return G},get round(){return e(n)}}),m(b),re(()=>se(C,`RUNDE ${e(n)??""}`)),d(o,b)},D=o=>{var b=O(),T=A(b);{var C=h=>{var t=Be(),c=A(t);Ie(c,{get difficulty(){return e(f).difficulty},handleNextRound:_,get GIFButtonTextSuccess(){return e(k)},get GIFButtonTextFailure(){return e(H)},get volume(){return e(u)},set volume(r){a(u,z(r))}});var B=R(c,2);{var E=r=>{X(r,{get score(){return e(g)}})};F(B,r=>{e(x)&&r(E)})}d(h,t)},N=h=>{var t=O(),c=A(t);{var B=r=>{var Q=Se(),L=A(Q);me(L,{get difficulty(){return e(f).difficulty},handleNextRound:_,get volume(){return e(u)},get GIFButtonTextSuccess(){return e(k)},get GIFButtonTextFailure(){return e(H)}});var K=R(L,2);{var U=j=>{X(j,{get score(){return e(g)}})};F(K,j=>{e(x)&&j(U)})}d(r,Q)},E=r=>{var Q=ze();d(r,Q)};F(c,r=>{e(f).game==="pattern"?r(B):r(E,!1)},!0)}d(h,t)};F(T,h=>{e(f).game==="klangQuiz"?h(C):h(N,!1)},!0)}d(o,b)};F(W,o=>{e(v)?o(Z):o(D,!1)})}m(P),d(w,P),te()}export{De as component};
