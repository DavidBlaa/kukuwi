import{b as W,a as f,t as y,c as Z}from"../chunks/CHkck4dw.js";import{i as se,h as ue,a2 as de,aH as ce,p as $,q as _,c as m,r as g,w as C,t as U,a as ee,g as t,s as b,b as p,f as H,d as M,u as fe}from"../chunks/BjWHaepb.js";import{i as z}from"../chunks/C6Z4-7cA.js";import{b as ve,p as T}from"../chunks/C6ycZBfC.js";import{o as ge}from"../chunks/nRd-gLFk.js";import{G as me}from"../chunks/YVsQTSm8.js";import{P as xe}from"../chunks/B45BiRW8.js";import{l as he,s as A}from"../chunks/IyUyzwpQ.js";import{r as be,B as J,s as _e}from"../chunks/Bop7QRR4.js";import{h as K}from"../chunks/B1_HN_wC.js";import{g as O}from"../chunks/6YAFCxBX.js";import{b as X}from"../chunks/C3By-Gyw.js";import{e as pe,i as ye}from"../chunks/C6vC90Bg.js";import{I as ke,F as Se}from"../chunks/DVkqBUXh.js";function we(e,r,l=r){var s=se();he(e,"input",a=>{var o=a?e.defaultValue:e.value;if(o=N(e)?L(o):o,l(o),s&&o!==(o=r())){var i=e.selectionStart,n=e.selectionEnd;e.value=o??"",n!==null&&(e.selectionStart=i,e.selectionEnd=Math.min(n,e.value.length))}}),(ue&&e.defaultValue!==e.value||de(r)==null&&e.value)&&l(N(e)?L(e.value):e.value),ce(()=>{var a=r();N(e)&&a===L(e.value)||e.type==="date"&&!a&&!e.value||a!==e.value&&(e.value=a??"")})}function N(e){var r=e.type;return r==="number"||r==="range"}function L(e){return e===""?null:+e}const Y=[{game:"klangQuiz",difficulty:1},{game:"klangQuiz",difficulty:2},{game:"pattern",difficulty:1},{game:"klangQuiz",difficulty:4},{game:"pattern",difficulty:2},{game:"klangQuiz",difficulty:3},{game:"pattern",difficulty:3},{game:"klangQuiz",difficulty:2},{game:"klangQuiz",difficulty:4},{game:"pattern",difficulty:2}];var Fe=y('<div class="fixed inset-0 z-50 flex items-center justify-center"><div class="absolute inset-0 bg-black opacity-50"></div> <div class="z-50 flex h-3/5 w-2/5 flex-col items-center justify-evenly rounded-2xl bg-kukuwi-blue shadow-xl"><div class="text-center"><h2 class="text-4xl font-bold text-white">Punktzahl:</h2> <h2 class="mt-5 text-8xl font-extrabold text-yellow-500 drop-shadow-[0_4px_4px_rgba(0,0,0,0.8)]"> </h2></div> <input class="z-60 basis-1/12 rounded-2xl border-black bg-white text-center text-2xl" placeholder="Spielername eingeben"> <div class="flex flex-col gap-y-4 text-3xl text-white"><!> <!></div></div></div>');function D(e,r){$(r,!0);let l=ve(r,"score",3,4e3),s=p("");function a(){K&&K.update(d=>{for(const w of d)w.highlight=!1;return d.push({name:t(s),points:l(),highlight:!0}),d}),O(X+"/Bestenliste")}var o=Fe(),i=_(m(o),2),n=m(i),x=_(m(n),2),u=m(x,!0);g(x),g(n);var h=_(n,2);be(h);var k=_(h,2),S=m(k);J(S,{bgBack:"bg-green-600",bgFront:"bg-green-500",onclick:a,padding:"p-3",children:(d,w)=>{C();var G=W("Abschicken");f(d,G)},$$slots:{default:!0}});var B=_(S,2);J(B,{bgBack:"bg-red-600",bgFront:"bg-red-500",onclick:()=>O(X+"/"),padding:"p-3",children:(d,w)=>{C();var G=W("Überspringen");f(d,G)},$$slots:{default:!0}}),g(k),g(i),g(o),U(()=>A(u,l())),we(h,()=>t(s),d=>b(s,d)),f(e,o),ee()}var ze=y("<div><!></div>"),Be=y('<div class="flex w-4/5"></div>');function Ge(e,r){var l=Be();pe(l,21,()=>r.roundHistory,ye,(s,a,o)=>{var i=ze(),n=m(i);{var x=u=>{ke(u,{size:"80%",color:"#525252",src:Se})};z(n,u=>{o===r.round-1&&u(x)})}g(i),U(()=>_e(i,`mx-[0.2rem] flex h-8 w-[10%] items-center justify-center border-2 border-neutral-600 ${t(a)?"bg-green-500":t(a)===!1?"bg-red-500":"bg-neutral-100"}`)),f(s,i)}),g(l),f(e,l)}var Ie=y('<div class="flex size-full flex-col items-center justify-center gap-12"><h1 class="text-9xl font-extrabold text-neutral-600"> </h1> <p class="mb-8 text-7xl font-extrabold text-yellow-500 drop-shadow-[0_4px_4px_rgba(0,0,0,0.8)]"> </p> <!></div>');function Te(e,r){let l=p(T(r.oldScore));const s=(r.totalScore-r.oldScore)/100;let a=0,o=setInterval(()=>{b(l,t(l)+s),a++,a>=100&&(b(l,T(r.totalScore)),clearInterval(o))},10);var i=Ie(),n=m(i),x=m(n);g(n);var u=_(n,2),h=m(u,!0);g(u);var k=_(u,2);Ge(k,{get roundHistory(){return r.roundHistory},get round(){return r.round}}),g(i),U(S=>{A(x,`RUNDE ${r.round??""}`),A(h,S)},[()=>Math.round(t(l))]),f(e,i)}var Pe=y("<!> <!>",1),Qe=y("<!> <!>",1),He=y("<p>Wrong game specified in playthrough.ts!</p>"),Re=y('<main class="h-screen w-screen bg-blue-200 p-5"><!></main>');function Oe(e,r){$(r,!0);const l=Y.length;let s=p(1),a=M(()=>Y[t(s)-1]),o=p(!1),i=p(.4),n=p(0),x=p(0),u=T(Array(l).fill(void 0)),h=p(!0);ge(()=>k());function k(){b(h,!0),setTimeout(v,2e3);function v(){b(h,!1)}}function S(v){b(x,T(t(n))),b(n,t(n)+v),u[t(s)-1]=v!==0,t(s)===l?b(o,!0):(fe(s),k())}const B=M(()=>t(s)===l?"Zum Ergebnis":"Nächste Runde"),d=M(()=>t(B));var w=Re(),G=m(w);{var te=v=>{Te(v,{get roundHistory(){return u},get round(){return t(s)},get totalScore(){return t(n)},get oldScore(){return t(x)}})},re=v=>{var V=Z(),ae=H(V);{var oe=F=>{var I=Pe(),P=H(I);me(P,{get difficulty(){return t(a).difficulty},handleNextRound:S,get GIFButtonTextSuccess(){return t(B)},get GIFButtonTextFailure(){return t(d)},get volume(){return t(i)},set volume(c){b(i,T(c))}});var R=_(P,2);{var E=c=>{D(c,{get score(){return t(n)}})};z(R,c=>{t(o)&&c(E)})}f(F,I)},ne=F=>{var I=Z(),P=H(I);{var R=c=>{var Q=Qe(),q=H(Q);xe(q,{get difficulty(){return t(a).difficulty},handleNextRound:S,get volume(){return t(i)},get GIFButtonTextSuccess(){return t(B)},get GIFButtonTextFailure(){return t(d)}});var le=_(q,2);{var ie=j=>{D(j,{get score(){return t(n)}})};z(le,j=>{t(o)&&j(ie)})}f(c,Q)},E=c=>{var Q=He();f(c,Q)};z(P,c=>{t(a).game==="pattern"?c(R):c(E,!1)},!0)}f(F,I)};z(ae,F=>{t(a).game==="klangQuiz"?F(oe):F(ne,!1)},!0)}f(v,V)};z(G,v=>{t(h)?v(te):v(re,!1)})}g(w),f(e,w),ee()}export{Oe as component};
