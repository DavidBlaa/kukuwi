import{a as d,t as h,b as W,c as Z}from"../chunks/CmPotoyF.js";import{a7 as ie,i as oe,$ as ue,aC as fe,c as m,r as v,t as V,g as t,p as te,s as x,n as q,a as ae,b as F,d as z,f as E,e as M,u as de}from"../chunks/6JMBiHYb.js";import{l as ce,s as re}from"../chunks/B0IBxgL7.js";import{i as B}from"../chunks/C-PgMaZH.js";import{b as ve,p as J}from"../chunks/CWcK6JqJ.js";import{o as ge}from"../chunks/Be6afn5i.js";import{G as me}from"../chunks/b1I2hU6f.js";import{e as xe,i as he}from"../chunks/Dn6whdxK.js";import{a as be,r as _e,B as K}from"../chunks/qzfPYBVn.js";import{I as pe,F as ye}from"../chunks/bLbAya-w.js";import{P as ke}from"../chunks/DZfaSqai.js";import{h as O}from"../chunks/CeEkwk16.js";import{g as X}from"../chunks/qfqbhri6.js";import{b as Y}from"../chunks/C0ubwFn-.js";function Fe(e,n,s=n){var l=ie();ce(e,"input",r=>{var a=r?e.defaultValue:e.value;if(a=A(e)?U(a):a,s(a),l&&a!==(a=n())){var i=e.selectionStart,o=e.selectionEnd;e.value=a??"",o!==null&&(e.selectionStart=i,e.selectionEnd=Math.min(o,e.value.length))}}),(oe&&e.defaultValue!==e.value||ue(n)==null&&e.value)&&s(A(e)?U(e.value):e.value),fe(()=>{var r=n();A(e)&&r===U(e.value)||e.type==="date"&&!r&&!e.value||r!==e.value&&(e.value=r??"")})}function A(e){var n=e.type;return n==="number"||n==="range"}function U(e){return e===""?null:+e}const D=[{game:"klangQuiz",difficulty:1},{game:"klangQuiz",difficulty:2},{game:"pattern",difficulty:1},{game:"klangQuiz",difficulty:4},{game:"pattern",difficulty:2},{game:"klangQuiz",difficulty:3},{game:"pattern",difficulty:3},{game:"klangQuiz",difficulty:2},{game:"klangQuiz",difficulty:4},{game:"pattern",difficulty:2}];var ze=h("<div><!></div>"),Be=h('<div class="flex w-4/5"></div>');function we(e,n){var s=Be();xe(s,21,()=>n.roundHistory,he,(l,r,a)=>{var i=ze(),o=m(i);{var b=g=>{pe(g,{size:"80%",color:"#525252",src:ye})};B(o,g=>{a===n.round-1&&g(b)})}v(i),V(()=>be(i,`mx-[0.2rem] flex h-8 w-[10%] items-center justify-center border-2 border-neutral-600 ${t(r)?"bg-green-500":t(r)===!1?"bg-red-500":"bg-neutral-100"}`)),d(l,i)}),v(s),d(e,s)}var Ge=h('<div class="fixed inset-0 z-50 flex items-center justify-center"><div class="absolute inset-0 bg-black opacity-50"></div> <div class="z-50 flex h-3/5 w-2/5 flex-col items-center justify-evenly rounded-2xl bg-kukuwi-blue shadow-xl"><div class="text-center"><h2 class="text-4xl font-bold text-white">Punktzahl:</h2> <h2 class="mt-5 text-8xl font-extrabold text-yellow-500 drop-shadow-[0_4px_4px_rgba(0,0,0,0.8)]"> </h2></div> <input class="z-60 basis-1/12 rounded-2xl border-black bg-white text-center text-2xl" placeholder="Spielername eingeben"> <div class="flex flex-col gap-y-4 text-3xl text-white"><!> <!></div></div></div>');function ee(e,n){te(n,!0);let s=ve(n,"score",3,4e3),l=z("");function r(){O&&O.update(u=>{for(const G of u)G.highlight=!1;return u.push({name:t(l),points:s(),highlight:!0}),u}),X(Y+"/Bestenliste")}var a=Ge(),i=x(m(a),2),o=m(i),b=x(m(o),2),g=m(b,!0);v(b),v(o);var _=x(o,2);_e(_);var w=x(_,2),p=m(w);K(p,{bgBack:"bg-green-600",bgFront:"bg-green-500",onclick:r,padding:"p-3",children:(u,G)=>{q();var I=W("Abschicken");d(u,I)},$$slots:{default:!0}});var Q=x(p,2);K(Q,{bgBack:"bg-red-600",bgFront:"bg-red-500",onclick:()=>X(Y+"/"),padding:"p-3",children:(u,G)=>{q();var I=W("Überspringen");d(u,I)},$$slots:{default:!0}}),v(w),v(i),v(a),V(()=>re(g,s())),Fe(_,()=>t(l),u=>F(l,u)),d(e,a),ae()}var Ie=h('<div class="flex size-full flex-col items-center justify-center gap-28"><h1 class="text-9xl font-extrabold text-neutral-600"> </h1> <!></div>'),Se=h("<!> <!>",1),Pe=h("<!> <!>",1),Qe=h("<p>Wrong game specified in playthrough.ts!</p>"),Te=h('<main class="h-screen w-screen bg-blue-200 p-5"><!></main>');function qe(e,n){te(n,!0);const s=D.length;let l=z(1),r=M(()=>D[t(l)-1]),a=z(!1),i=z(.4),o=z(0),b=J(Array(s).fill(void 0)),g=z(!0);ge(()=>_());function _(){F(g,!0),setTimeout(c,2e3);function c(){F(g,!1)}}function w(c){F(o,t(o)+c),b[t(l)-1]=c!==0,t(l)===s?F(a,!0):(de(l),_())}const p=M(()=>t(l)===s?"Zum Ergebnis":"Nächste Runde"),Q=M(()=>t(p));var u=Te(),G=m(u);{var I=c=>{var y=Ie(),S=m(y),$=m(S);v(S);var j=x(S,2);we(j,{get roundHistory(){return b},get round(){return t(l)}}),v(y),V(()=>re($,`RUNDE ${t(l)??""}`)),d(c,y)},ne=c=>{var y=Z(),S=E(y);{var $=k=>{var P=Se(),T=E(P);me(T,{get difficulty(){return t(r).difficulty},handleNextRound:w,get GIFButtonTextSuccess(){return t(p)},get GIFButtonTextFailure(){return t(Q)},get volume(){return t(i)},set volume(f){F(i,J(f))}});var N=x(T,2);{var H=f=>{ee(f,{get score(){return t(o)}})};B(N,f=>{t(a)&&f(H)})}d(k,P)},j=k=>{var P=Z(),T=E(P);{var N=f=>{var R=Pe(),C=E(R);ke(C,{get difficulty(){return t(r).difficulty},handleNextRound:w,get volume(){return t(i)},get GIFButtonTextSuccess(){return t(p)},get GIFButtonTextFailure(){return t(Q)}});var le=x(C,2);{var se=L=>{ee(L,{get score(){return t(o)}})};B(le,L=>{t(a)&&L(se)})}d(f,R)},H=f=>{var R=Qe();d(f,R)};B(T,f=>{t(r).game==="pattern"?f(N):f(H,!1)},!0)}d(k,P)};B(S,k=>{t(r).game==="klangQuiz"?k($):k(j,!1)},!0)}d(c,y)};B(G,c=>{t(g)?c(I):c(ne,!1)})}v(u),d(e,u),ae()}export{qe as component};
