import{b as Z,a as f,t as y,c as q}from"../chunks/By-5l90-.js";import{a7 as se,i as ue,$ as de,aD as ce,p as $,s as _,c as m,r as g,n as C,t as E,a as ee,g as t,b as h,d as p,f as R,e as N,u as fe}from"../chunks/Be9DTLUM.js";import{i as F}from"../chunks/BsFKgJcA.js";import{b as ve,p as T}from"../chunks/COnAHfzI.js";import{o as ge}from"../chunks/DahaPC90.js";import{G as me}from"../chunks/CXXDLlyJ.js";import{P as xe}from"../chunks/DvJlCzwW.js";import{a as be,s as U}from"../chunks/lf1__Oa6.js";import{r as he,B as D,a as _e}from"../chunks/BVkj_WBF.js";import{h as J}from"../chunks/nONjSM-A.js";import{g as K}from"../chunks/C8aFKFPU.js";import{b as O}from"../chunks/CLVV3WwN.js";import{e as pe,i as ye}from"../chunks/DCEjmf86.js";import{I as ke,F as Se}from"../chunks/BwXCox5C.js";function we(e,r,l=r){var s=se();be(e,"input",a=>{var n=a?e.defaultValue:e.value;if(n=L(e)?A(n):n,l(n),s&&n!==(n=r())){var i=e.selectionStart,o=e.selectionEnd;e.value=n??"",o!==null&&(e.selectionStart=i,e.selectionEnd=Math.min(o,e.value.length))}}),(ue&&e.defaultValue!==e.value||de(r)==null&&e.value)&&l(L(e)?A(e.value):e.value),ce(()=>{var a=r();L(e)&&a===A(e.value)||e.type==="date"&&!a&&!e.value||a!==e.value&&(e.value=a??"")})}function L(e){var r=e.type;return r==="number"||r==="range"}function A(e){return e===""?null:+e}const X=[{game:"klangQuiz",difficulty:1},{game:"klangQuiz",difficulty:2},{game:"pattern",difficulty:1},{game:"klangQuiz",difficulty:4},{game:"pattern",difficulty:2},{game:"klangQuiz",difficulty:3},{game:"pattern",difficulty:3},{game:"klangQuiz",difficulty:2},{game:"klangQuiz",difficulty:4},{game:"pattern",difficulty:2}];var Fe=y('<div class="fixed inset-0 z-50 flex items-center justify-center"><div class="absolute inset-0 bg-black opacity-50"></div> <div class="z-50 flex h-3/5 w-2/5 flex-col items-center justify-evenly rounded-2xl bg-kukuwi-blue shadow-xl"><div class="text-center"><h2 class="text-4xl font-bold text-white">Punktzahl:</h2> <h2 class="mt-5 text-8xl font-extrabold text-yellow-500 drop-shadow-[0_4px_4px_rgba(0,0,0,0.8)]"> </h2></div> <input class="z-60 basis-1/12 rounded-2xl border-black bg-white text-center text-2xl" placeholder="Spielername eingeben"> <div class="flex flex-col gap-y-4 text-3xl text-white"><!> <!></div></div></div>');function Y(e,r){$(r,!0);let l=ve(r,"score",3,4e3),s=p("");function a(){J&&J.update(d=>{for(const S of d)S.highlight=!1;return d.push({name:t(s),points:l(),highlight:!0}),d}),K(O+"/Bestenliste")}var n=Fe(),i=_(m(n),2),o=m(i),x=_(m(o),2),u=m(x,!0);g(x),g(o);var b=_(o,2);he(b);var k=_(b,2),z=m(k);D(z,{bgBack:"bg-green-600",bgFront:"bg-green-500",onclick:a,padding:"p-3",children:(d,S)=>{C();var G=Z("Abschicken");f(d,G)},$$slots:{default:!0}});var B=_(z,2);D(B,{bgBack:"bg-red-600",bgFront:"bg-red-500",onclick:()=>K(O+"/"),padding:"p-3",children:(d,S)=>{C();var G=Z("Überspringen");f(d,G)},$$slots:{default:!0}}),g(k),g(i),g(n),E(()=>U(u,l())),we(b,()=>t(s),d=>h(s,d)),f(e,n),ee()}var ze=y("<div><!></div>"),Be=y('<div class="flex w-4/5"></div>');function Ge(e,r){var l=Be();pe(l,21,()=>r.roundHistory,ye,(s,a,n)=>{var i=ze(),o=m(i);{var x=u=>{ke(u,{size:"80%",color:"#525252",src:Se})};F(o,u=>{n===r.round-1&&u(x)})}g(i),E(()=>_e(i,`mx-[0.2rem] flex h-8 w-[10%] items-center justify-center border-2 border-neutral-600 ${t(a)?"bg-green-500":t(a)===!1?"bg-red-500":"bg-neutral-100"}`)),f(s,i)}),g(l),f(e,l)}var Ie=y('<div class="flex size-full flex-col items-center justify-center gap-12"><h1 class="text-9xl font-extrabold text-neutral-600"> </h1> <p class="mb-8 text-7xl font-extrabold text-yellow-500 drop-shadow-[0_4px_4px_rgba(0,0,0,0.8)]"> </p> <!></div>');function Te(e,r){let l=p(T(r.oldScore));const s=(r.totalScore-r.oldScore)/100;let a=0,n=setInterval(()=>{h(l,t(l)+s),a++,a>=100&&(h(l,T(r.totalScore)),clearInterval(n))},10);var i=Ie(),o=m(i),x=m(o);g(o);var u=_(o,2),b=m(u,!0);E(()=>U(b,Math.round(t(l)))),g(u);var k=_(u,2);Ge(k,{get roundHistory(){return r.roundHistory},get round(){return r.round}}),g(i),E(()=>U(x,`RUNDE ${r.round??""}`)),f(e,i)}var Pe=y("<!> <!>",1),Qe=y("<!> <!>",1),Re=y("<p>Wrong game specified in playthrough.ts!</p>"),Ee=y('<main class="h-screen w-screen bg-blue-200 p-5"><!></main>');function Ke(e,r){$(r,!0);const l=X.length;let s=p(1),a=N(()=>X[t(s)-1]),n=p(!1),i=p(.4),o=p(0),x=p(0),u=T(Array(l).fill(void 0)),b=p(!0);ge(()=>k());function k(){h(b,!0),setTimeout(v,2e3);function v(){h(b,!1)}}function z(v){h(x,T(t(o))),h(o,t(o)+v),u[t(s)-1]=v!==0,t(s)===l?h(n,!0):(fe(s),k())}const B=N(()=>t(s)===l?"Zum Ergebnis":"Nächste Runde"),d=N(()=>t(B));var S=Ee(),G=m(S);{var te=v=>{Te(v,{get roundHistory(){return u},get round(){return t(s)},get totalScore(){return t(o)},get oldScore(){return t(x)}})},re=v=>{var V=q(),ae=R(V);{var ne=w=>{var I=Pe(),P=R(I);me(P,{get difficulty(){return t(a).difficulty},handleNextRound:z,get GIFButtonTextSuccess(){return t(B)},get GIFButtonTextFailure(){return t(d)},get volume(){return t(i)},set volume(c){h(i,T(c))}});var H=_(P,2);{var j=c=>{Y(c,{get score(){return t(o)}})};F(H,c=>{t(n)&&c(j)})}f(w,I)},oe=w=>{var I=q(),P=R(I);{var H=c=>{var Q=Qe(),W=R(Q);xe(W,{get difficulty(){return t(a).difficulty},handleNextRound:z,get volume(){return t(i)},get GIFButtonTextSuccess(){return t(B)},get GIFButtonTextFailure(){return t(d)}});var le=_(W,2);{var ie=M=>{Y(M,{get score(){return t(o)}})};F(le,M=>{t(n)&&M(ie)})}f(c,Q)},j=c=>{var Q=Re();f(c,Q)};F(P,c=>{t(a).game==="pattern"?c(H):c(j,!1)},!0)}f(w,I)};F(ae,w=>{t(a).game==="klangQuiz"?w(ne):w(oe,!1)},!0)}f(v,V)};F(G,v=>{t(b)?v(te):v(re,!1)})}g(S),f(e,S),ee()}export{Ke as component};
